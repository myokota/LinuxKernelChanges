
# Linux kernel v3.5 Changes

ソース: http://kernelnewbies.org/Linux_3.5

## Prominent features

##### ext4 metadata checksums
* ZFS/Btrfs 等モダンなファイルシステムの機能の一つとして、チェックサムによるデータの保障がある。
* ext4 においても、メタデータのチェックサムを格納する機能が追加された。
* メタデータが読みだされる度に、算出したチェックサムと、格納済みのチェックサムが比較される。
* もし比較結果が異なれば、メタデータが不正と判断される。(データ内容の整合性はチェックされない)
* チェックサム機能を有効にするには、以下の何れか。
  * ```tune2fs -O metadata_csum```
  * (作成時に) ```mkfs -O metadata_csum```
* ファイル作成と削除のみを繰り返し、エクステントツリーを更新するテストでは、性能が20%低下したが、実際の運用シーンにおいて、トータルのI/Oに対するメタデータはごく少量なので、チェックサムのオーバヘッドと考えれば、無視できる程度といえる。

##### Uprobes: userspace probes
* ユーザ空間版 kprobes。
* ユーザ空間においてパフォーマンス測定用のプローブがメモリ上に設定可能。
* バイナリを変更することなく、また、再起動することなく動的にプローブを設定可能。
* プローブは perf/systemtap/LLTng など既存ツールによって設定。

##### Seccomp-based system call filtering
* 既存の Seccomp が拡張された
* 制限するシステムコールは限られていたが、任意のシステムコールを指定し、フィルタリングする機能が追加された
* BPF(Berkeley Packet Filtering) の仕組みを流用している
* Chromium ブラウザではこの機能をサポートし、プラグインをサンドボックス上で動かしている

##### Buffer bloat fighting: CoDel queue management
* (おさらい) bufferbloat: ネットワーク中の端末が過度にバッファリングすることによって遅延を招いてしまう現象
* bufferbloat への対策として CoDel(controlled delay) が実装された
* AQM アルゴリズムが使用されている
  * http://queue.acm.org/detail.cfm?id=2209336 

##### TCP connection repair
* リモートとの TCP 接続を停止(保存)/再開(復元)できる機能が追加された
* OpenVZ プロジェクトの成果物
  * http://criu.org/TCP_connection

##### TCP Early Retransmit
* RFC 5827 で規定されている
* 重複する ACK を減少させて高速な再接続を実現する

